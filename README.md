Детектор парковки
Описание проекта
Parking Detector — это система, использующая технологии компьютерного зрения, разработанная на языке Python, которая позволяет в реальном времени обнаруживать свободные парковочные места и отслеживать занятые. Это помогает водителям оперативно находить доступные места для парковки.

Для отображения данных используется веб-интерфейс на Flask, предоставляющий пользователю информацию о доступности парковок. Все данные хранятся в PostgreSQL, что обеспечивает надёжное хранение и эффективную работу с реляционными структурами.

Для обеспечения производительности используются многопоточность и многопроцессорность, позволяя обрабатывать видеопотоки в реальном времени. Подключение к IP-камере осуществляется через HTTP, обеспечивая актуальный видеопоток с парковочной зоны.

 Основные технологии
Python

OpenCV + YOLOv5

Flask web-приложение

PostgreSQL база данных

SQLAlchemy ORM

Threading и multiprocessing

Работа с IP-камерой через HTTP

HTML/CSS/JS интерфейс

 Как это работает
На демонстрационном видео показан конечный результат:

Красные метки — занятые места, определённые YOLOv5

Зелёные метки — свободные места, определённые системой на основе анализа входа машин

Таблицы базы данных PostgreSQL:
parking_areas — данные о зонах парковки, добавляемые вручную.

parking_positions — таблица, содержащая потенциальные парковочные места, которые определяются автоматически при фиксации въезда транспортного средства.

 Компоненты архитектуры
Server
Серверный скрипт на Flask выполняет следующие функции:

Запускает объект класса ParkingModel, который отвечает за видеопоток и обновление данных о местах.

Создаёт экземпляр ParkingPositionDetector, запускающий алгоритм детекции новых мест.

Устанавливает соединение с базой данных PostgreSQL через SQLAlchemy.

Обрабатывает запросы:

/video_feed — отдаёт видеопоток.

/info — возвращает JSON с информацией о количестве мест.

/ — главная страница веб-интерфейса.

ParkingModel
Этот класс реализует основной функционал распознавания занятых мест с помощью YOLOv5 (PyTorch Hub). Получает видеопоток, обрабатывает кадры и выделяет занятые зоны. На основе данных из базы формирует карту текущего состояния парковки. Для выбора наибольшего количества свободных мест решается задача максимального независимого множества с помощью динамического программирования.

ParkingPositionDetector
Данный класс использует OpenCV для анализа движения и фиксации появления автомобиля. Когда автомобиль входит в зону парковки, система определяет его положение и сохраняет его в таблицу parking_positions. Также реализована возможность удаления и редактирования зон и мест.

Tracker
Класс отслеживает движение машин внутри зоны. Определяет, где остановился автомобиль, и сохраняет его финальную позицию как потенциальную парковку. Используется для оптимизации количества активных парковочных мест.

DbHandler
DbHandler реализует интерфейс взаимодействия с PostgreSQL с помощью SQLAlchemy. Функциональность включает:

Добавление и редактирование зон парковки (parking_areas)

Работа с координатами парковочных мест (parking_positions)

Запросы и выборки для аналитики

 Известные ограничения
Несмотря на эффективность YOLOv5, бывают случаи, когда модель не распознаёт занятую позицию, либо ошибочно считает свободной. Это связано с ограничениями модели и углами съёмки. В целом, система демонстрирует высокую точность при стабильной подаче видеопотока.

